---
# DRBD configuration tasks

- name: Create DRBD configuration directory
  ansible.builtin.file:
    path: /etc/drbd.d
    state: directory
    mode: '0755'

- name: Display DRBD configuration message
  ansible.builtin.debug:
    msg: "DRBD is managed by LINSTOR - manual configuration not recommended"

- name: Check DRBD status
  ansible.builtin.command: drbdadm status
  register: drbd_status
  failed_when: false
  changed_when: false

- name: Display DRBD status
  ansible.builtin.debug:
    var: drbd_status.stdout_lines
  when: drbd_status.rc == 0
